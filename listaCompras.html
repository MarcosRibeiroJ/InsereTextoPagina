<!DOCTYPE html>
<!--Fontes:
	https://receitasdecodigo.com.br/front-end/adicionar-e-remover-itens-em-array-javascript
	https://www.devmedia.com.br/javascript-arrays/4079
	https://www.w3schools.com/jsref/coll_table_cells.asp
	https://pt.stackoverflow.com/questions/90841/somar-array-javascript
	https://pt.stackoverflow.com/questions/39569/como-tratar-vari%C3%A1vel-preenchida-por-nan-javascript
	https://cursos.alura.com.br/forum/topico-existe-parsedouble-em-javascript-38967
-->
<html>
	<head>
		<meta charset="UTF-8" />
	</head>
	<body>
		<form action="" method="post">
			<div>
				<div style="float: left; margin-right: 30px">
					<label for="produto" style="margin-right: 10px">Produto: </label>
					<input type="text" id="produto" />
				</div>
				<div>
					<label for="preco" style="margin-right: 10px">Preço: </label>
					<input type="text" id="preco" />
				</div>
				<div>
					<button type="button" style="margin-top: 30px;margin-left: 290px" onclick="adicionaItens()">Cadastrar</button>
				</div>
			</div>
		</form>
		</br>
		<hr>
		<table border=1 id="tabelaCompras">
			<tr>
				<th>Produto</th>
				<th>Preço</th>
			</tr>
			<tr>
				<td style="font-weight: bold">Total</td>
				<td></td>
			</tr>
		</table>
	</body>
	<script>
		function adicionaItens() {
			
			var produto = document.getElementById("produto").value;
			var preco = document.getElementById("preco").value;
			
			var tabela = document.getElementById("tabelaCompras");
			
			var numeroLinhas = tabela.rows.length;
						
			var novoCadastro = tabela.insertRow(numeroLinhas-1);
			
			var celulaProduto = novoCadastro.insertCell(0);
			var celulaPreco = novoCadastro.insertCell(1);
			
			celulaProduto.innerHTML = produto;
			celulaPreco.innerHTML = preco;
			
			somaCompra(tabela);
		}
		
		function somaCompra(tabelaAtualizada) {
			//criando um array vazio para armazenar os preços
			var listaPreco = [];
			var i;
			var total = 0;
			//percorrendo os itens da tabela na linha com incremento e sempre na segunda célula (que contém o valor do preço)
			for(i = 1; i <= tabelaAtualizada.rows.length - 2; i++) {
				listaPreco.push(tabelaAtualizada.rows[i].cells[1].innerHTML);
			}
			//somando os itens da lista de preço que foram adicionados no array
			for(i = 0; i < listaPreco.length; i++) {
				total += parseFloat(listaPreco[i]);
			}
			//adicionando o total da soma na célula do total
			tabelaAtualizada.rows[tabelaAtualizada.rows.length-1].cells[1].innerHTML = total;
		}
	</script>
</html>
